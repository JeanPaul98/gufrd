<table [responsive]="true" bordered cTable>
  <thead >
  <tr>
    <th class="tw-text-sm tw-text-secondary" scope="col">N° ORDRE</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">N° DEMANDE</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">ATP</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">NOM NAVIRE</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">IMO</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">REDEVANCE</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">STATUS DEMANDE</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">MOTIF</th>
    <th class="tw-text-sm tw-text-secondary" scope="col">DATE REJET</th>
  </tr>
    @if (loadingDemands) {
      <tr>
        <td colspan="10" class="tw-text-center !tw-my-0 !tw-p-0">
          <app-loading-bar></app-loading-bar>
        </td>
      </tr>
    }
  </thead>

  <tbody>

    @for (demand of demands(); track demand; ) {
      @if (!loadingDemands) {
        <tr>
          <td>{{ $index + 1 }}</td>
          <td>
            <a [routerLink]="['/importations/ipn/demand/details', demand.atp]"  (click)="xendDetailsInfo(demand)"
               class="tw-inline-flex tw-items-center tw-font-medium tw-text-blue-600 hover:tw-cursor-pointer hover:tw-underline">
              {{ demand.numGenerer }}
              <svg class="tw-w-5 tw-h-5 tw-ms-2 rtl:tw-rotate-180" xmlns="http://www.w3.org/2000/svg" width="18"
                   height="18" viewBox="0 0 24 24">
                <path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                      d="M11 4H4v14a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5M9 15L20 4m-5 0h5v5"/>
              </svg>
            </a>
          </td>
          <td scope="row">
            {{ demand.atp }}
          </td>
          <td>{{ demand.nomNavire }}</td>
          <td>{{ demand.imo }}</td>
          <td>{{ demand.montantRedevance | price}}</td>
          <td>
              <span
                class="tw-py-1 tw-px-2 tw-inline-flex tw-items-center tw-gap-x-1 tw-font-medium tw-bg-red-100 tw-text-red-500 tw-rounded-full"
              >
                {{demand.etat === 'REJETER' && 'Rejetée'}}
                <svg xmlns="http://www.w3.org/2000/svg" width="13" height="13" viewBox="0 0 15 15"><path fill="currentColor" d="M3.64 2.27L7.5 6.13l3.84-3.84A.92.92 0 0 1 12 2a1 1 0 0 1 1 1a.9.9 0 0 1-.27.66L8.84 7.5l3.89 3.89A.9.9 0 0 1 13 12a1 1 0 0 1-1 1a.92.92 0 0 1-.69-.27L7.5 8.87l-3.85 3.85A.92.92 0 0 1 3 13a1 1 0 0 1-1-1a.9.9 0 0 1 .27-.66L6.16 7.5L2.27 3.61A.9.9 0 0 1 2 3a1 1 0 0 1 1-1c.24.003.47.1.64.27"/></svg>
              </span>
          </td>
          <td>
            {{demand.motifRejet}}
          </td>
          <td>{{demand.dateRejet | date: 'dd/MM/yyyy: HH:mm'}}</td>
          <td>
          </td>
        </tr>
      }
    }
    @if (demands().length === 0 && loadingDemands === false) {
      <tr>
        <td colspan="10" class="tw-text-center">Aucun résultat</td>
      </tr>
    }
    @if (loadingDemands) {
      <tr>
        <td colspan="10" class="tw-text-center !tw-text-gray-400">En cours de chargement...</td>
      </tr>
    }
  </tbody>
</table>
<div class="bottom-table tw-flex tw-flex-row tw-justify-between tw-item-center">
  <div class="tw-flex tw-flex-row tw-justify-center tw-items-center">
    <div>{{ demands().length }} resultats</div>
  </div>
  <div class="action-button tw-flex tw-item-center tw-flex-row tw-justify-end !tw-gap-1">
    <button
      cButton

      class="!tw-gap-2 !tw-flex !tw-items-center !tw-shadow-button hover:!tw-bg-secondary-light !tw-border !tw-bg-white !tw-border-border-secondary"
      color="light"
    >
      <span>Préçédent</span>
    </button>
    <button
      cButton

      class="!tw-gap-2 !tw-flex !tw-items-center !tw-shadow-button hover:!tw-bg-secondary-light !tw-border !tw-bg-white !tw-border-border-secondary"
      color="light"
    >
      <span>Suivant</span>
    </button>
  </div>
</div>






